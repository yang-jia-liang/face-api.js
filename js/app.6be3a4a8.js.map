{"version":3,"file":"js/app.6be3a4a8.js","mappings":"8GACOA,GAAG,O,4EAARC,EAAAA,EAAAA,IAEM,MAFN,EAEM,EADJC,EAAAA,EAAAA,IAAiBC,I,8rCCuKnB,MAAMC,GAAOC,EAAAA,EAAAA,IAAS,CACpBC,OAAQ,GACRC,WAAY,EACZC,WAAY,GACZC,WAAY,GACZC,aAAa,EACbC,iBAAiB,EACjBC,kBAAkB,EAClBC,YAAa,GACbC,YAAa,EACbC,iBAAkB,CAChBC,KAAQ,IACRC,OAAQ,KAEVC,qBAAsB,CACpBC,QAAW,KACXC,MAAW,KACXC,IAAW,KACXC,MAAW,KACXC,QAAW,KACXC,UAAW,KACXC,UAAW,MAGbC,YAAa,CACX,eACA,aACA,QAEFC,MAAO,GAEPC,YAAY,EACZC,QAAS,CACP,CACEC,OAAQ,CACN,CAAEC,KAAM,MAAOC,MAAO,OACtB,CAAED,KAAM,OAAQC,MAAO,SAEzBC,aAAc,GAEhB,CACEH,OAAQ,CACN,CAAEC,KAAM,MAAOC,MAAO,IACtB,CAAED,KAAM,MAAOC,MAAO,IACtB,CAAED,KAAM,MAAOC,MAAO,IACtB,CAAED,KAAM,MAAOC,MAAO,IACtB,CAAED,KAAM,MAAOC,MAAO,IACtB,CAAED,KAAM,MAAOC,MAAO,IACtB,CAAED,KAAM,MAAOC,MAAO,IACtB,CAAED,KAAM,MAAOC,MAAO,IACtB,CAAED,KAAM,MAAOC,MAAO,KAExBC,aAAc,GAEhB,CACEH,OAAQ,CACN,CAAEC,KAAM,MAAOC,MAAO,KACtB,CAAED,KAAM,MAAOC,MAAO,KACtB,CAAED,KAAM,MAAOC,MAAO,KACtB,CAAED,KAAM,MAAOC,MAAO,KACtB,CAAED,KAAM,MAAOC,MAAO,KACtB,CAAED,KAAM,MAAOC,MAAO,KACtB,CAAED,KAAM,MAAOC,MAAO,MAExBC,aAAc,IAGlBC,cAAe,CAAC,OAAQ,GAAK,KAE7BC,gBAAgB,EAChBC,WAAY,GACZC,WAAY,KAEZC,MAAO,EACPC,aAAc,GACdC,KAAM,GACNC,IAAK,KAEDC,GAAOrC,EAAAA,EAAAA,IAAS,CACpBsC,OAAQ,KACRC,IAAK,KACLC,MAAO,KACPC,UAAW,QAEP,OAAEH,EAAF,IAAUC,EAAV,MAAeC,EAAf,UAAsBC,IAAcC,EAAAA,EAAAA,IAAOL,GAS3CM,EAAWC,UACf,MAAMC,EAAQC,EAAEC,OAAOF,MAGjBN,QAAYS,EAAAA,GAAsBH,EAAM,IAC9C9C,EAAKE,OAASsC,EAAIU,GAAlB,EAQIC,EAAaN,UACjB,MAAMO,EAAOC,SAASC,iBAAiB,oBAEvC,IAAK,MAAMd,KAAOY,EAAM,CAEtB,MAAMG,QAAqBN,EAAAA,GACLT,GACjBgB,oBACAC,qBAGLzD,EAAKuB,MAAQ,IACRvB,EAAKuB,MACR,IAAI0B,EAAAA,GACAT,EAAIkB,IACJ,CAACH,EAAaI,aAGrB,GASGC,EAAe,CAACC,EAAKC,KAEzB,MAAMC,EAAO,CAAEC,EAAG,GAAIC,EAAG,GAAIC,MAAO,IAAKC,OAAQ,KAC3CC,EAAc,CAClBC,MAAO,oBACPC,UAAW,EACXC,SAAU,MACVC,iBAAkB,CAChBC,eAAgB,WAChBC,gBAAiB,qBACjBC,UAAW,SACXC,SAAW,GACXC,QAAS,KAGPC,EAAc,IAAI7B,EAAAA,GAAAA,QAAqBY,GAAOE,EAAMD,GAAWM,GACrEU,EAAYC,KAAKxC,EAAOX,MAAxB,EAWIoD,EAAY,CAACC,EAAOC,EAAKpB,KAE7B,MAAMnC,EAAO,CACX,sBACA,6BAEIwD,EAAS,CAAEnB,EAAG,IAAKC,EAAG,KACtBG,EAAe,GAOfgB,EAAc,IAAInC,EAAAA,GAAAA,cAA2BgC,GAAStD,EAAMuD,GAAOC,EAAQrB,GAAWM,GAC5FgB,EAAYL,KAAKxC,EAAOX,MAAxB,EAGIyD,EAAgBxC,UACpB,MAAM,WAAEzC,EAAF,WAAcC,EAAd,MAA0BkB,EAA1B,OAAiCrB,EAAjC,gBAAyCK,EAAzC,iBAA0DC,EAA1D,YAA4EE,GAAgBV,EAC5FsF,EAAQ/E,GAAmBC,EAAmB,UAAY,QAC1D+E,EAAKC,KAAKC,MAEhB,GAAe,UAAVH,IAAsBpF,GAAsB,YAAVoF,IAAwB5E,EAC7D,OAGF,IAAIgF,EAGFA,EADY,UAAVJ,EACY,CACZpB,MAAO1B,EAAIZ,MAAMsC,MACjBC,OAAQ3B,EAAIZ,MAAMuC,QAINlB,EAAAA,GAAwBV,EAAOX,MAAOa,EAAMb,OAAO,GAGnEqB,EAAAA,GAAwBV,EAAOX,MAAO8D,GAEtC,MAAM5B,EAAU6B,IAGhB,GAAIvF,EAAWwF,SAAS,eAAgB,CACtC,MAAMC,QAAmB5C,EAAAA,GACLqC,EAAOxB,GACtBN,oBACAsC,sBAICC,EAAoB9C,EAAAA,GAAsB4C,EAAYH,GAGtDM,EAAc,IAAI/C,EAAAA,GAAoB1B,GAAS,IAErDwE,EAAkBE,SAAQC,IACxB,MAAM,WAAEvC,EAAYwC,WAAW,IAAEtC,IAAUqC,EAErCE,EAAYJ,EAAYK,cAAc1C,GAG5CC,EAAaC,EAAK,CAChBQ,MAAO+B,EAAUE,QADnB,GAIH,CAGD,GAAIlG,EAAWwF,SAAS,cAAe,CACrC,MAAMC,QAAmB5C,EAAAA,GACLqC,EAAOxB,GACtBN,oBACA+C,sBAGCC,EAAiBvD,EAAAA,GAAsB4C,EAAYH,GASzDc,EAAeP,SAAQQ,IACrB,MAAM,YAAEC,GAAgBD,EAElBE,EAAkBC,KAAKC,OAAOC,OAAOpF,OAAOgF,IAC5CK,EAAaD,OAAOE,QAAQN,GAAaO,MAAK,EAAE,CAAErF,KAAWA,IAAU+E,IAAgB,GAE7F3B,EACI,CACG,GAAEhF,EAAKc,qBAAqBiG,OAAgBH,KAAKM,MAA4C,IAAtCjE,EAAAA,GAAAA,MAAoB0D,SAE9EF,EAAON,UAAUtC,IAAIsD,WAJzB,GAOH,CAGD,GAAI/G,EAAWwF,SAAS,gBAAiB,CACvC,MAAMC,QAAmB5C,EAAAA,GACLqC,EAAOxB,GACtBN,oBACA4D,mBAGCZ,EAAiBvD,EAAAA,GAAsB4C,EAAYH,GAGzDc,EAAeP,SAAQQ,IACrB,MAAM,IAAEY,EAAF,OAAOC,EAAP,kBAAeC,GAAsBd,EAE3CzB,EACI,CACG,GAAEhF,EAAKW,iBAAiB2G,OAAqD,IAAzCrE,EAAAA,GAAAA,MAAoBsE,OACxD,GAAEtE,EAAAA,GAAAA,MAAoBoE,EAAK,SAE9BZ,EAAON,UAAUtC,IAAIsD,WALzB,GAQH,CAGD,GAAI9G,EAAWuF,SAAS,cAAe,CACrC,MAAMC,QAAmB5C,EAAAA,GACLqC,EAAOxB,GAGrBiC,EAAoB9C,EAAAA,GAAsB4C,EAAYH,GAM5DK,EAAkBE,SAAQQ,IACxB,MAAM,IAAE5C,EAAF,OAAO2D,GAAWf,EAExB7C,EAAaC,EAAK,CAChBQ,MAAQ,MAAKuC,KAAKM,MAAe,IAATM,OAD1B,GAIH,CAGD,GAAInH,EAAWuF,SAAS,YAAa,CACnC,MAAMC,QAAmB5C,EAAAA,GACLqC,EAAOxB,GACtBN,oBAGCgD,EAAiBvD,EAAAA,GAAsB4C,EAAYH,GAGzDzC,EAAAA,GAAAA,kBAA+BV,EAAOX,MAAO4E,EAC9C,CAEG9F,IACF+G,EAAgBjC,KAAKC,MAAQF,GAE7BmC,YAAW,KACTC,OAAOC,sBAAsBvC,EAA7B,IAEH,EAIGwC,EAAehF,UACnB,MAAMiF,QAAmB7E,EAAAA,GAAyB,aAAaO,oBAAoBC,qBAC7EsE,QAAmB9E,EAAAA,GAAyB,aAAaO,oBAAoBC,qBAGjFzD,EAAKG,WADH2H,GAAcC,EACEnB,KAAKM,MAAyG,IAAnGjE,EAAAA,GAAAA,MAAoB,EAAIA,EAAAA,GAA0B6E,EAAWnE,WAAYoE,EAAWpE,cAE/F,CACnB,EAIG8D,EAAmBO,IACvBhI,EAAKmC,aAAe,CAAC6F,GAAUC,OAAOjI,EAAKmC,cAAc+F,MAAM,EAAG,IAClE,MAAMC,EAAcnI,EAAKmC,aAAaiG,QAAO,CAACC,EAAOC,IAAMD,EAAQC,IAAKtI,EAAKmC,aAAaoG,OAE1FvI,EAAKoC,KAAQ,GAAEwE,KAAKM,MAAMiB,QAC1BnI,EAAKqC,IAAO,GAAEY,EAAAA,GAAAA,MAAoB,IAAOkF,IAAzC,EAIIxC,EAAyB,KAC7B,MAAM,cAAE7D,GAAkB9B,EAE1B,MAA4B,QAArB8B,EAAc,GACf,IAAImB,EAAAA,GAA8B,CAClCuF,cAAe1G,EAAc,KAgB7B,IAAImB,EAAAA,GAAgC,CACpCwF,eAAgB3G,EAAc,GAC9B4G,UAAW5G,EAAc,IApB/B,EAyBI6G,EAAuB,CAACC,EAAaC,KACxB,IAAbA,IACF7I,EAAKyB,QAAQ,GAAGC,OACW,QAAzBkH,EAAY,GAAGhH,MACX5B,EAAKyB,QAAQ,GAAGC,OAAOoH,KAAIC,IAAQ,QAAC,UAAKA,GAAV,IAAgBC,UAAU,MACzDhJ,EAAKyB,QAAQ,GAAGC,OAAOoH,KAAIC,IAAQ,QAAC,UAAKA,GAAV,IAAgBC,UAAU,MAChE,EAIGC,EAAgBvH,IACpB,MAAM,gBAAEnB,EAAF,iBAAoBC,GAAqBR,EAE/CA,EAAK8B,cAAgBJ,EAAOoH,KAAIC,GAAQA,EAAKnH,QAC7C5B,EAAKwB,YAAa,EAGbjB,GAAoBC,GACvB6E,GACD,EAIG6D,EAAkB,KACjBC,UAAUC,cAAiBD,UAAUC,aAAaC,iBAUvDF,UAAUC,aAAaC,mBAClBC,MAAKC,IACJ,MAAMC,EAAUD,EACXE,QAAOV,GAAsB,eAAdA,EAAKW,OACpBZ,KAAI,CAACC,EAAMY,KAAP,CAAoBhI,KAAMoH,EAAK1E,OAAU,MAAKsF,EAAQ,IAAK/H,MAAOmH,EAAKa,aAE5EJ,EAAQjB,QACRvI,EAAK+B,gBAAiB,EACtB/B,EAAKgC,WAAawH,GAGlBK,EAAAA,EAAAA,KAAW,CACPC,QAAS,WACTC,aAAa,EACbC,MAAM,GAEb,IAEFC,OAAMC,IACLC,QAAQC,IAAIF,EAAZ,IA5BFL,EAAAA,EAAAA,KAAW,CACPC,QAAS,yBACTC,aAAa,EACbC,MAAM,GAMd,EAwBIK,EAAkBT,IACtB5J,EAAK+B,gBAAiB,EAEtBoH,UAAUC,aAAakB,aAAa,CAClCC,OAAO,EACP9H,MAAO,CACL+H,SAAUZ,EAAS,MAGlBN,MAAK,SAASmB,GACbhI,EAAMb,MAAM8I,UAAYD,EACxBzK,EAAKiC,WAAawI,EAAOE,YAAY,GACrChD,OAAOC,sBAAsBvC,EAC9B,IACA4E,OAAM,WACHJ,EAAAA,EAAAA,KAAW,CACPC,QAAS,UACTC,aAAa,EACbC,MAAM,GAEb,GAjBL,EAqBIY,EAAO,KACX,MAAMC,EAAQhB,EAAAA,EAAAA,QAAc,CACxBiB,SAAU,EACVhB,QAAS,WACTC,aAAa,EACbC,MAAM,IAaVe,QAAQC,IAAI,CACV/H,EAAAA,GAAAA,mBAAAA,YAA4C,YAC5CA,EAAAA,GAAAA,kBAAAA,YAA2C,YAC3CA,EAAAA,GAAAA,sBAAAA,YAA+C,YAC/CA,EAAAA,GAAAA,eAAAA,YAAwC,YACxCA,EAAAA,GAAAA,iBAAAA,YAA0C,YAC1CA,EAAAA,GAAAA,MAAAA,YAA+B,YAC/BA,EAAAA,GAAAA,kBAAAA,YAA2C,YAC3CA,EAAAA,GAAAA,aAAAA,YAAsC,cAGnCqG,MAAK,KACJnG,IACA0H,EAAMI,OAAN,IAEDhB,OAAM,KACLY,EAAMI,OAAN,GAhBN,E,OAoBFC,EAAAA,EAAAA,KAAU,KACRN,GAAM,KAIRO,EAAAA,EAAAA,KAAM,IAAMnL,EAAKQ,mBAAmB4K,IAG3B,MAFHA,EACFlC,IAGA,UAAAlJ,EAAKiC,kBAAL,SAAiBoJ,MAClB,I,mjHChqBL,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,QFCA,GACEC,KAAM,MACNC,WAAY,CACVC,cAAaA,IGLjB,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,Q,mBCHAC,EAAAA,EAAAA,IAAUC,GACLC,IAAIC,EAAAA,IACJC,MAAM,O,uDCPPC,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAaE,QAGrB,IAAIC,EAASN,EAAyBE,GAAY,CAGjDG,QAAS,CAAC,GAOX,OAHAE,EAAoBL,GAAUI,EAAQA,EAAOD,QAASJ,GAG/CK,EAAOD,OACf,CAGAJ,EAAoBO,EAAID,E,WCzBxB,IAAIE,EAAW,GACfR,EAAoBS,EAAI,SAASjG,EAAQkG,EAAUC,EAAIC,GACtD,IAAGF,EAAH,CAMA,IAAIG,EAAeC,IACnB,IAASC,EAAI,EAAGA,EAAIP,EAASlE,OAAQyE,IAAK,CACrCL,EAAWF,EAASO,GAAG,GACvBJ,EAAKH,EAASO,GAAG,GACjBH,EAAWJ,EAASO,GAAG,GAE3B,IAJA,IAGIC,GAAY,EACPC,EAAI,EAAGA,EAAIP,EAASpE,OAAQ2E,MACpB,EAAXL,GAAsBC,GAAgBD,IAAa/F,OAAOqG,KAAKlB,EAAoBS,GAAGU,OAAM,SAASC,GAAO,OAAOpB,EAAoBS,EAAEW,GAAKV,EAASO,GAAK,IAChKP,EAASW,OAAOJ,IAAK,IAErBD,GAAY,EACTJ,EAAWC,IAAcA,EAAeD,IAG7C,GAAGI,EAAW,CACbR,EAASa,OAAON,IAAK,GACrB,IAAIO,EAAIX,SACER,IAANmB,IAAiB9G,EAAS8G,EAC/B,CACD,CACA,OAAO9G,CArBP,CAJCoG,EAAWA,GAAY,EACvB,IAAI,IAAIG,EAAIP,EAASlE,OAAQyE,EAAI,GAAKP,EAASO,EAAI,GAAG,GAAKH,EAAUG,IAAKP,EAASO,GAAKP,EAASO,EAAI,GACrGP,EAASO,GAAK,CAACL,EAAUC,EAAIC,EAwB/B,C,eC5BAZ,EAAoBuB,EAAI,SAASlB,GAChC,IAAImB,EAASnB,GAAUA,EAAOoB,WAC7B,WAAa,OAAOpB,EAAO,UAAY,EACvC,WAAa,OAAOA,CAAQ,EAE7B,OADAL,EAAoB0B,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CACR,C,eCNAxB,EAAoB0B,EAAI,SAAStB,EAASwB,GACzC,IAAI,IAAIR,KAAOQ,EACX5B,EAAoB6B,EAAED,EAAYR,KAASpB,EAAoB6B,EAAEzB,EAASgB,IAC5EvG,OAAOiH,eAAe1B,EAASgB,EAAK,CAAEW,YAAY,EAAMC,IAAKJ,EAAWR,IAG3E,C,eCPApB,EAAoBiC,EAAI,WACvB,GAA0B,kBAAfC,WAAyB,OAAOA,WAC3C,IACC,OAAOC,MAAQ,IAAIC,SAAS,cAAb,EAGhB,CAFE,MAAOtL,GACR,GAAsB,kBAAX4E,OAAqB,OAAOA,MACxC,CACA,CAPuB,E,eCAxBsE,EAAoB6B,EAAI,SAASQ,EAAKC,GAAQ,OAAOzH,OAAO0H,UAAUC,eAAeC,KAAKJ,EAAKC,EAAO,C,eCCtGtC,EAAoBsB,EAAI,SAASlB,GACX,qBAAXsC,QAA0BA,OAAOC,aAC1C9H,OAAOiH,eAAe1B,EAASsC,OAAOC,YAAa,CAAEhN,MAAO,WAE7DkF,OAAOiH,eAAe1B,EAAS,aAAc,CAAEzK,OAAO,GACvD,C,eCNAqK,EAAoB4C,EAAI,E,eCKxB,IAAIC,EAAkB,CACrB,IAAK,GAaN7C,EAAoBS,EAAEQ,EAAI,SAAS6B,GAAW,OAAoC,IAA7BD,EAAgBC,EAAgB,EAGrF,IAAIC,EAAuB,SAASC,EAA4BjP,GAC/D,IAKIkM,EAAU6C,EALVpC,EAAW3M,EAAK,GAChBkP,EAAclP,EAAK,GACnBmP,EAAUnP,EAAK,GAGIgN,EAAI,EAC3B,GAAGL,EAASyC,MAAK,SAASxP,GAAM,OAA+B,IAAxBkP,EAAgBlP,EAAW,IAAI,CACrE,IAAIsM,KAAYgD,EACZjD,EAAoB6B,EAAEoB,EAAahD,KACrCD,EAAoBO,EAAEN,GAAYgD,EAAYhD,IAGhD,GAAGiD,EAAS,IAAI1I,EAAS0I,EAAQlD,EAClC,CAEA,IADGgD,GAA4BA,EAA2BjP,GACrDgN,EAAIL,EAASpE,OAAQyE,IACzB+B,EAAUpC,EAASK,GAChBf,EAAoB6B,EAAEgB,EAAiBC,IAAYD,EAAgBC,IACrED,EAAgBC,GAAS,KAE1BD,EAAgBC,GAAW,EAE5B,OAAO9C,EAAoBS,EAAEjG,EAC9B,EAEI4I,EAAqBC,KAAK,wBAA0BA,KAAK,yBAA2B,GACxFD,EAAmBpJ,QAAQ+I,EAAqBO,KAAK,KAAM,IAC3DF,EAAmBG,KAAOR,EAAqBO,KAAK,KAAMF,EAAmBG,KAAKD,KAAKF,G,IC/CvF,IAAII,EAAsBxD,EAAoBS,OAAEN,EAAW,CAAC,MAAM,WAAa,OAAOH,EAAoB,KAAO,IACjHwD,EAAsBxD,EAAoBS,EAAE+C,E","sources":["webpack://face-api/./src/App.vue","webpack://face-api/./src/components/faceRecognize/index.vue","webpack://face-api/./src/components/faceRecognize/index.vue?36ac","webpack://face-api/./src/App.vue?7ccd","webpack://face-api/./src/main.js","webpack://face-api/webpack/bootstrap","webpack://face-api/webpack/runtime/chunk loaded","webpack://face-api/webpack/runtime/compat get default export","webpack://face-api/webpack/runtime/define property getters","webpack://face-api/webpack/runtime/global","webpack://face-api/webpack/runtime/hasOwnProperty shorthand","webpack://face-api/webpack/runtime/make namespace object","webpack://face-api/webpack/runtime/publicPath","webpack://face-api/webpack/runtime/jsonp chunk loading","webpack://face-api/webpack/startup"],"sourcesContent":["<template>\r\n  <div id=\"app\">\r\n    <FaceRecognize />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport FaceRecognize from \"@/components/faceRecognize/index.vue\";\r\n\r\nexport default {\r\n  name: 'App',\r\n  components: {\r\n    FaceRecognize,\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n  body {\r\n    background: #efeff4;\r\n    text-align: left;\r\n    padding: 0 10px;\r\n    height: 100vh;\r\n    overflow: auto;\r\n  }\r\n</style>","<template>\r\n  <div>\r\n    <input\r\n        hidden\r\n        type=\"file\"\r\n        @change=\"setImage\"\r\n        accept=\"image/*\"\r\n        ref=\"pickImage\"\r\n    >\r\n\r\n    <!--  图片/视频 捕获区  -->\r\n    <div class=\"detectBox\">\r\n      <img\r\n        v-show=\"!data.trackVideoFaces && !data.trackCameraFaces\"\r\n        :src=\"data.base64\"\r\n        alt=\"\"\r\n        width=\"500\"\r\n        ref=\"img\"\r\n        id=\"myImg\"\r\n        @load=\"detectFactory\"\r\n      >\r\n\r\n      <video\r\n        v-if=\"data.trackVideoFaces\"\r\n        width=\"500\"\r\n        ref=\"video\"\r\n        id=\"myVideo\"\r\n        muted\r\n        playsinline\r\n        preload\r\n        loop\r\n        @durationchange=\"video.play()\"\r\n        @play=\"data.videoStatus = 1\"\r\n        @pause=\"data.videoStatus = 0\"\r\n      >\r\n        <source src=\"./media/shylock.mp4\" type=\"video/mp4\">\r\n        抱歉，您的浏览器不支持嵌入式视频。\r\n      </video>\r\n\r\n      <video\r\n        v-if=\"data.trackCameraFaces\"\r\n        ref=\"video\"\r\n        id=\"myVideo\"\r\n        autoplay\r\n        muted\r\n        playsinline\r\n        @play=\"data.videoStatus = 1\"\r\n        @pause=\"data.videoStatus = 0\"\r\n      />\r\n\r\n      <canvas ref=\"canvas\" />\r\n    </div>\r\n\r\n    <section v-show=\"data.trackVideoFaces || data.trackCameraFaces\" class=\"timer\">\r\n      <p>平均检测时长：{{ data.time }}</p>\r\n      <p>fps：{{ data.fps > 200 ? '200+' : data.fps }}</p>\r\n    </section>\r\n\r\n    {{ data.videoTrack }}\r\n\r\n    <!-- 已录入人脸 -->\r\n    <section class=\"faceCompare\" v-show=\"data.detectList.includes('Recognition')\">\r\n      <h2>已录入人脸</h2>\r\n      <div class=\"referenceImgs\">\r\n        <p>\r\n          <img src=\"./images/卷福.jpg\" alt=\"夏洛克·福尔摩斯\">\r\n          <span>夏洛克·福尔摩斯</span>\r\n        </p>\r\n\r\n        <p>\r\n          <img src=\"./images/华生.png\" alt=\"约翰·H·华生\">\r\n          <span>约翰·H·华生</span>\r\n      </p>\r\n      </div>\r\n    </section>\r\n\r\n    <!-- 相似度比较 -->\r\n    <section class=\"similarity\" v-show=\"data.showSimilar\">\r\n      <h2>相似度比较</h2>\r\n      <div class=\"referenceImgs\">\r\n        <p>\r\n          <img src=\"./images/卷福.jpg\" alt=\"夏洛克·福尔摩斯\" id=\"reference\">\r\n          <span>夏洛克·福尔摩斯</span>\r\n        </p>\r\n\r\n        <p>\r\n          <img :src=\"data.base64\" alt=\"\" id=\"toCompare\" @load=\"compareFaces\">\r\n          <span>相似度：</span>\r\n          <span :class=\"{ danger: data.similarity < 50 }\">{{ data.similarity }}%</span>\r\n        </p>\r\n      </div>\r\n    </section>\r\n\r\n    <van-checkbox-group v-model=\"data.detectList\" @change=\"detectFactory\">\r\n      <van-checkbox name=\"Recognition\">人脸识别</van-checkbox>\r\n      <van-checkbox name=\"Expression\">表情</van-checkbox>\r\n      <van-checkbox name=\"AgeAndGender\">年龄性别</van-checkbox>\r\n    </van-checkbox-group>\r\n\r\n    <van-checkbox-group v-model=\"data.optionList\" @change=\"detectFactory\">\r\n      <van-checkbox name=\"showBorder\">显示人脸边界</van-checkbox>\r\n      <van-checkbox name=\"showMark\">显示人脸标记点</van-checkbox>\r\n    </van-checkbox-group>\r\n\r\n\r\n\r\n    <div class=\"bottomBox\">\r\n      <p>\r\n        <van-switch v-model=\"data.showSimilar\" size=\"24\" />\r\n        人脸相似度比较\r\n      </p>\r\n      <p>\r\n        <van-switch v-model=\"data.trackVideoFaces\" :disabled=\"data.trackCameraFaces\" size=\"24\" />\r\n        视频人脸追踪\r\n      </p>\r\n      <p>\r\n        <van-switch v-model=\"data.trackCameraFaces\" :disabled=\"data.trackVideoFaces\" size=\"24\" />\r\n        摄像头人脸追踪\r\n      </p>\r\n    </div>\r\n\r\n    <van-button plain type=\"primary\" @click=\"pickImage.click()\">\r\n      选择图片\r\n    </van-button>\r\n    <van-button plain type=\"primary\" @click=\"data.showConfig = true\">\r\n      配置\r\n    </van-button>\r\n\r\n    <!-- 摄像头列表 -->\r\n    <van-popup\r\n      :show=\"data.showCameraList\"\r\n      position=\"bottom\"\r\n      round\r\n      :close-on-click-overlay=\"false\"\r\n    >\r\n        <van-picker\r\n                title=\"摄像头列表\"\r\n                :columns=\"data.cameraList\"\r\n                @confirm=\"getVideoStream\"\r\n                @cancel=\"data.showCameraList = false; data.trackCameraFaces = false\"\r\n        />\r\n    </van-popup>\r\n\r\n    <!-- 人脸检测器配置 -->\r\n    <van-popup\r\n      :show=\"data.showConfig\"\r\n      position=\"bottom\"\r\n      round\r\n      :close-on-click-overlay=\"false\"\r\n    >\r\n      <van-picker\r\n              title=\"人脸检测器配置\"\r\n              :columns=\"data.columns\"\r\n              @confirm=\"selectHandle\"\r\n              @cancel=\"data.showConfig = false\"\r\n              @change=\"handleColumnDisabled\"\r\n      />\r\n    </van-popup>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script setup>\r\n  import * as faceapi from 'face-api.js';\r\n  import { onMounted, reactive, toRefs, watch } from 'vue';\r\n\r\n  import { Toast } from 'vant';\r\n\r\n\r\n  const data = reactive({\r\n    base64: '',\r\n    similarity: 0,           // 相似度\r\n    detectList: [],          // 检测项\r\n    optionList: [],          // 辅助项\r\n    showSimilar: false,      // 人脸相似度比较\r\n    trackVideoFaces: false,  // 视频人脸追踪\r\n    trackCameraFaces: false, // 摄像头人脸追踪\r\n    videoStream: '',         // 摄像头视频流\r\n    videoStatus: 0,          // 0：暂停，1：播放\r\n    genderTranslator: {\r\n      male:   '男',\r\n      female: '女'\r\n    },\r\n    expressionTranslator: {\r\n      neutral:   '正常',\r\n      happy:     '开心',\r\n      sad:       '伤心',\r\n      angry:     '生气',\r\n      fearful:   '害怕',\r\n      disgusted: '恶心',\r\n      surprised: '惊喜',\r\n    },\r\n    // 检测类型\r\n    detectTypes: [\r\n      'AgeAndGender', //  年龄性别\r\n      'Expression',   //  表情\r\n      'Face',         //  人脸\r\n    ],\r\n    faces: [], // 录入的人脸描述\r\n\r\n    showConfig: false, // 人脸检测器配置弹出层\r\n    columns: [\r\n      {\r\n        values: [\r\n          { text: 'SSD', value: 'SSD' },\r\n          { text: 'Tiny', value: 'Tiny' }\r\n        ],\r\n        defaultIndex: 1\r\n      },\r\n      {\r\n        values: [\r\n          { text: '0.1', value: 0.1 },\r\n          { text: '0.2', value: 0.2 },\r\n          { text: '0.3', value: 0.3 },\r\n          { text: '0.4', value: 0.4 },\r\n          { text: '0.5', value: 0.5 },\r\n          { text: '0.6', value: 0.6 },\r\n          { text: '0.7', value: 0.7 },\r\n          { text: '0.8', value: 0.8 },\r\n          { text: '0.9', value: 0.9 },\r\n        ],\r\n        defaultIndex: 4\r\n      },\r\n      {\r\n        values: [\r\n          { text: '128', value: 128 },\r\n          { text: '160', value: 160 },\r\n          { text: '224', value: 224 },\r\n          { text: '320', value: 320 },\r\n          { text: '416', value: 416 },\r\n          { text: '512', value: 512 },\r\n          { text: '608', value: 608 }\r\n        ],\r\n        defaultIndex: 3\r\n      }\r\n    ],\r\n    selectedValue: ['Tiny', 0.5, 320],\r\n\r\n    showCameraList: false, // 摄像头列表弹出层\r\n    cameraList: [],\r\n    videoTrack: null,\r\n\r\n    count: 0,\r\n    forwardTimes: [],\r\n    time: '',\r\n    fps: ''\r\n  });\r\n  const refs = reactive({\r\n    canvas: null,\r\n    img: null,\r\n    video: null,\r\n    pickImage: null,\r\n  });\r\n  const { canvas, img, video, pickImage } = toRefs(refs);\r\n\r\n  /**\r\n   * remind\r\n   *\r\n   * const input = await faceapi.fetchImage(uri);\r\n   * */\r\n\r\n  // 设置页面图片\r\n  const setImage = async (e) => {\r\n    const files = e.target.files;\r\n\r\n    // 从Blob中创建一个HTMLImageElement\r\n    const img = await faceapi.bufferToImage(files[0]);\r\n    data.base64 = img.src;\r\n  };\r\n\r\n  /**\r\n   * @description 录入人脸数据\r\n   *\r\n   * 大脸照、黑白照可能识别不出来，可以修改配置，降低人脸的置信度\r\n   * */\r\n  const entryFaces = async () => {\r\n    const imgs = document.querySelectorAll('.faceCompare img');\r\n\r\n    for (const img of imgs) {\r\n      /** 注意：这里不能传options，不然会报错 */\r\n      const singleResult = await faceapi\r\n          .detectSingleFace(img)\r\n          .withFaceLandmarks()\r\n          .withFaceDescriptor()\r\n      ;\r\n\r\n      data.faces = [\r\n        ...data.faces,\r\n        new faceapi.LabeledFaceDescriptors(\r\n            img.alt,\r\n            [singleResult.descriptor]\r\n        )\r\n      ]\r\n    }\r\n  };\r\n\r\n  /**\r\n   * @desc 自定义文本描绘框\r\n   *\r\n   * @param {object}  box     - 盒子位置大小\r\n   * @param {object}  options - 配置项\r\n   * */\r\n  const drawLabelBox = (box, options) => {\r\n    // 绘制框 + 绘制文本\r\n    const _box = { x: 50, y: 50, width: 100, height: 100 }\r\n    const drawOptions = {\r\n      label: 'Hello I am a box!', // 框的描述文字，只能整单行文字\r\n      lineWidth: 2,               // 边框宽度\r\n      boxColor: 'red',            // 边框颜色，默认蓝色\r\n      drawLabelOptions: {\r\n        anchorPosition: 'TOP_LEFT',            // [TOP_LEFT | TOP_RIGHT | BOTTOM_LEFT | BOTTOM_RIGHT]\r\n        backgroundColor: 'rgba(0, 0, 0, 0.5)', // label文字块的背景颜色\r\n        fontColor: 'purple',                   // label文字颜色\r\n        fontSize:  16,                         // label文字大小\r\n        padding: 15                            // label文字的padding\r\n      }\r\n    }\r\n    const drawAreaBox = new faceapi.draw.DrawBox(box || _box, options || drawOptions);\r\n    drawAreaBox.draw(canvas.value);\r\n  };\r\n\r\n\r\n  /**\r\n   * @desc 自定义文本字段\r\n   *\r\n   * @param {array}  texts   - 多行文字\r\n   * @param {object} pos     - 文本位置\r\n   * @param {object} options - 配置项\r\n   * */\r\n  const drawTexts = (texts, pos, options) => {\r\n    // 绘制多行文本块\r\n    const text = [\r\n      'This is a textline!',\r\n      'This is another textline!'\r\n    ]\r\n    const anchor = { x: 200, y: 200 };         // 相对于canvas的位置\r\n    const drawOptions  = {\r\n      // backgroundColor: 'rgba(0, 0, 0, 0.5)', // 文字块的背景颜色\r\n      // fontColor: 'purple',                   // 文字颜色\r\n      // fontSize:  16,                         // 文字大小\r\n      // padding: 15                            // 文字的padding\r\n    }\r\n\r\n    const drawTextBox = new faceapi.draw.DrawTextField(texts || text, pos || anchor, options || drawOptions)\r\n    drawTextBox.draw(canvas.value)\r\n  };\r\n\r\n  const detectFactory = async () => {\r\n    const { detectList, optionList, faces, base64, trackVideoFaces, trackCameraFaces, videoStatus } = data;\r\n    const input = trackVideoFaces || trackCameraFaces ? 'myVideo' : 'myImg'\r\n    const ts = Date.now();\r\n\r\n    if ((input === 'myImg' && !base64) || (input === 'myVideo' && !videoStatus)) {\r\n      return;\r\n    }\r\n\r\n    let displaySize;\r\n\r\n    if (input === 'myImg') {\r\n      displaySize = {\r\n        width: img.value.width,\r\n        height: img.value.height\r\n      }\r\n    }\r\n    else {\r\n      displaySize = faceapi.matchDimensions(canvas.value, video.value, true);\r\n    }\r\n    // 准备画布，没有这一步方框位置会偏移\r\n    faceapi.matchDimensions(canvas.value, displaySize);\r\n\r\n    const options = getFaceDetectorOptions();\r\n\r\n    // 绘制人脸识别结果\r\n    if (detectList.includes('Recognition')) {\r\n      const detections = await faceapi\r\n          .detectAllFaces(input, options)\r\n          .withFaceLandmarks()\r\n          .withFaceDescriptors()\r\n      ;\r\n\r\n      // 调整检测到的盒子和地标的大小，以防显示的图像与原始图像大小不同\r\n      const resizedDetections = faceapi.resizeResults(detections, displaySize);\r\n\r\n      // 脸部比对的参考对象\r\n      const faceMatcher = new faceapi.FaceMatcher(faces || []);\r\n\r\n      resizedDetections.forEach(fd => {\r\n        const { descriptor, detection: { box } } = fd;\r\n\r\n        const bestMatch = faceMatcher.findBestMatch(descriptor)\r\n\r\n        // 自定义输出边界盒子\r\n        drawLabelBox(box, {\r\n          label: bestMatch._label\r\n        })\r\n      })\r\n    }\r\n\r\n    // 绘制脸部表情\r\n    if (detectList.includes('Expression')) {\r\n      const detections = await faceapi\r\n          .detectAllFaces(input, options)\r\n          .withFaceLandmarks()\r\n          .withFaceExpressions();\r\n\r\n      // 调整检测到的盒子和地标的大小，以防显示的图像与原始图像大小不同\r\n      const resizedResults = faceapi.resizeResults(detections, displaySize);\r\n\r\n\r\n      // 绘制文本框，显示最大可能性的表情\r\n      // const minProbability = 0.05;\r\n      // faceapi.draw.drawFaceExpressions(canvas.value, resizedResults, minProbability);\r\n\r\n\r\n      // 自定义输出表情识别结果\r\n      resizedResults.forEach(result => {\r\n        const { expressions } = result;\r\n\r\n        const maxProbability  = Math.max(...Object.values(expressions));\r\n        const expression = Object.entries(expressions).find(([, value]) => value === maxProbability)[0];\r\n\r\n        drawTexts(\r\n            [\r\n              `${data.expressionTranslator[expression]} (${Math.round(faceapi.utils.round(maxProbability) * 100)}%)`,\r\n            ],\r\n            result.detection.box.bottomLeft\r\n        )\r\n      })\r\n    }\r\n\r\n    // 绘制性别年龄\r\n    if (detectList.includes('AgeAndGender')) {\r\n      const detections = await faceapi\r\n          .detectAllFaces(input, options)\r\n          .withFaceLandmarks()\r\n          .withAgeAndGender();\r\n\r\n      // 调整检测到的盒子和地标的大小，以防显示的图像与原始图像大小不同\r\n      const resizedResults = faceapi.resizeResults(detections, displaySize);\r\n\r\n      // 输出年龄、性别、年龄可能性\r\n      resizedResults.forEach(result => {\r\n        const { age, gender, genderProbability } = result;\r\n\r\n        drawTexts(\r\n            [\r\n              `${data.genderTranslator[gender]} (${faceapi.utils.round(genderProbability) * 100}%)`,\r\n              `${faceapi.utils.round(age, 0)} 岁 `\r\n            ],\r\n            result.detection.box.bottomLeft\r\n        )\r\n      })\r\n    }\r\n\r\n    // 绘制脸部边界\r\n    if (optionList.includes('showBorder')) {\r\n      const detections = await faceapi\r\n          .detectAllFaces(input, options);\r\n\r\n      // 调整检测到的盒子和地标的大小，以防显示的图像与原始图像大小不同\r\n      const resizedDetections = faceapi.resizeResults(detections, displaySize);\r\n\r\n      // 绘制方框\r\n      // faceapi.draw.drawDetections(canvas.value, resizedDetections);\r\n\r\n      // 自定义输出边界盒子\r\n      resizedDetections.forEach(result => {\r\n        const { box, _score } = result;\r\n\r\n        drawLabelBox(box, {\r\n          label: `可信度${Math.round(_score * 100)}%`\r\n        })\r\n      })\r\n    }\r\n\r\n    // 绘制脸部标记点\r\n    if (optionList.includes('showMark')) {\r\n      const detections = await faceapi\r\n          .detectAllFaces(input, options)\r\n          .withFaceLandmarks()\r\n\r\n      // 调整检测到的盒子和地标的大小，以防显示的图像与原始图像大小不同\r\n      const resizedResults = faceapi.resizeResults(detections, displaySize);\r\n\r\n      // 将标记点绘制到画布中\r\n      faceapi.draw.drawFaceLandmarks(canvas.value, resizedResults);\r\n    }\r\n\r\n    if (videoStatus) {\r\n      updateTimeStats(Date.now() - ts);\r\n\r\n      setTimeout(() => {\r\n        window.requestAnimationFrame(detectFactory);\r\n      })\r\n    }\r\n  };\r\n\r\n  // 比较相似度\r\n  const compareFaces = async() => {\r\n    const detection1 = await faceapi.detectSingleFace('reference').withFaceLandmarks().withFaceDescriptor();\r\n    const detection2 = await faceapi.detectSingleFace('toCompare').withFaceLandmarks().withFaceDescriptor();\r\n\r\n    if (detection1 && detection2) {\r\n      data.similarity = Math.round(faceapi.utils.round(1 - faceapi.euclideanDistance(detection1.descriptor, detection2.descriptor)) * 100);\r\n    } else {\r\n      data.similarity = 0;\r\n    }\r\n  };\r\n\r\n  // 计算平均花费时长和FPS\r\n  const updateTimeStats = (timeInMs) => {\r\n    data.forwardTimes = [timeInMs].concat(data.forwardTimes).slice(0, 30);\r\n    const avgTimeInMs = data.forwardTimes.reduce((total, t) => total + t) / data.forwardTimes.length;\r\n\r\n    data.time = `${Math.round(avgTimeInMs)} ms`;\r\n    data.fps = `${faceapi.utils.round(1000 / avgTimeInMs)}`\r\n  };\r\n\r\n  // 配置人脸检测器参数\r\n  const getFaceDetectorOptions = () => {\r\n    const { selectedValue } = data;\r\n\r\n    return selectedValue[0] === 'SSD'\r\n        ? new faceapi.SsdMobilenetv1Options({\r\n          minConfidence: selectedValue[1]\r\n        })\r\n        /**\r\n         * @param inputSize?: number\r\n         处理图像的大小，越小越快\r\n         在检测较小的人脸时， 必须被32整除\r\n         常见的大小有128、160、224、320、416、512、608 ,\r\n         用于通过网络摄像头进行人脸跟踪我建议使用较小尺寸的，例如128、160\r\n         用于检测较小的人脸使用较大尺寸的，例如512、608\r\n         默认值： 416\r\n         *  @param scoreThreshold?: number\r\n         最小置信阈值\r\n         默认值:0.5\r\n         *\r\n         * @desc inputSize和scoreThreshold的不同配置，都会影响返回结果的数量\r\n         * */\r\n        : new faceapi.TinyFaceDetectorOptions({\r\n          scoreThreshold: selectedValue[1],\r\n          inputSize: selectedValue[2]\r\n        })\r\n  };\r\n\r\n  // 控制人脸检测器选项\r\n  const handleColumnDisabled = (allSelected, rowIndex) => {\r\n    if (rowIndex === 0) {\r\n      data.columns[2].values =\r\n        allSelected[0].value === 'SSD'\r\n          ? data.columns[2].values.map(item => ({ ...item, disabled: true }))\r\n          : data.columns[2].values.map(item => ({ ...item, disabled: false }))\r\n    }\r\n  };\r\n\r\n  // 人脸检测器配置项改变\r\n  const selectHandle = (values) => {\r\n    const { trackVideoFaces , trackCameraFaces } = data;\r\n\r\n    data.selectedValue = values.map(item => item.value);\r\n    data.showConfig = false;\r\n\r\n    // 图片检测，重新加载检测函数，视频不需要（播放时会一直重复调用）\r\n    if (!trackVideoFaces && !trackCameraFaces) {\r\n      detectFactory();\r\n    }\r\n  };\r\n\r\n  // 获取媒体设备列表\r\n  const getMediaDevices = () => {\r\n    if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {\r\n        Toast.fail({\r\n            message: '不支持 enumerateDevices()',\r\n            forbidClick: true,\r\n            mask: true,\r\n        });\r\n\r\n      return;\r\n    }\r\n\r\n    navigator.mediaDevices.enumerateDevices()\r\n        .then(devices => {\r\n          const cameras = devices\r\n              .filter(item => item.kind === 'videoinput')\r\n              .map((item, index) => ({ text: item.label || `摄像头${index + 1}`, value: item.deviceId }));\r\n\r\n          if (cameras.length) {\r\n              data.showCameraList = true;\r\n              data.cameraList = cameras;\r\n          }\r\n          else {\r\n              Toast.fail({\r\n                  message: '未找到网络摄像头',\r\n                  forbidClick: true,\r\n                  mask: true,\r\n              });\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n  };\r\n\r\n  // 请求媒体设备，获取视频流\r\n  const getVideoStream = (deviceId) => {\r\n    data.showCameraList = false;\r\n\r\n    navigator.mediaDevices.getUserMedia({\r\n      audio: false,\r\n      video: {\r\n        sourceId: deviceId[0]\r\n      }\r\n    })\r\n        .then(function(stream) {\r\n          video.value.srcObject = stream;\r\n          data.videoTrack = stream.getTracks()[0];\r\n          window.requestAnimationFrame(detectFactory);\r\n        })\r\n        .catch(function() {\r\n            Toast.fail({\r\n                message: '摄像头调用失败',\r\n                forbidClick: true,\r\n                mask: true,\r\n            });\r\n        })\r\n  };\r\n\r\n  // 加载模型\r\n  const init = () => {\r\n    const toast = Toast.loading({\r\n        duration: 0,\r\n        message: '模型加载中...',\r\n        forbidClick: true,\r\n        mask: true,\r\n    });\r\n\r\n    // 加载训练好的模型np\r\n    // ageGenderNet:          年龄、性别识别模型，大约420KB\r\n    // faceExpressionNet:     人脸表情识别模型，识别表情,开心，沮丧，普通，大约310KB\r\n    // faceLandmark68Net：    68个点人脸地标检测模型（默认模型），大约350KB\r\n    // faceLandmark68TinyNet：68个点人脸地标检测模型（小模型），大约80KB\r\n    // faceRecognitionNet:    人脸识别模型，可以比较任意两个人脸的相似性，大约6.2MB\r\n    // ssdMobilenetv1：       SSD 移动网络 V1，大约5.4MB，准确的最高，推理时间最慢\r\n    // tinyFaceDetector:      微型人脸检测器（实时人脸检测器），与 SSD Mobilenet V1 人脸检测器相比，它速度更快、体积更小且资源消耗更少，但在检测小人脸方面的表现略逊一筹。移动和网络友好\r\n    // mtcnn                  大约2MB\r\n    // tinyYolov2             识别身体轮廓的算法，不知道怎么用\r\n    Promise.all([\r\n      faceapi.nets.faceRecognitionNet.loadFromUri('./models'),\r\n      faceapi.nets.faceLandmark68Net.loadFromUri('./models'),\r\n      faceapi.nets.faceLandmark68TinyNet.loadFromUri('./models'),\r\n      faceapi.nets.ssdMobilenetv1.loadFromUri('./models'),\r\n      faceapi.nets.tinyFaceDetector.loadFromUri('./models'),\r\n      faceapi.nets.mtcnn.loadFromUri('./models'),\r\n      faceapi.nets.faceExpressionNet.loadFromUri('./models'),\r\n      faceapi.nets.ageGenderNet.loadFromUri('./models'),\r\n      // faceapi.nets.tinyYolov.loadFromUri('./models')\r\n    ])\r\n        .then(() => {\r\n          entryFaces();\r\n          toast.clear();\r\n        })\r\n        .catch(() => {\r\n          toast.clear();\r\n        })\r\n  };\r\n\r\n  onMounted(() => {\r\n    init();\r\n  });\r\n\r\n  // 监听摄像头\r\n  watch(() => data.trackCameraFaces, (newValue) => {\r\n    if (newValue) {\r\n      getMediaDevices();\r\n    } else {\r\n      // 关闭摄像头\r\n      data.videoTrack?.stop();\r\n    }\r\n  });\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  /* 图片/视频 捕获区 */\r\n  .detectBox {\r\n    position: relative;\r\n    min-height: 200px;\r\n\r\n    img, video {\r\n      width: 100%;\r\n    }\r\n\r\n    canvas {\r\n      width: 100%;\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n    }\r\n  }\r\n\r\n  /* 美化样式 */\r\n  .van-button {\r\n    margin: 20px 15px 0 0;\r\n  }\r\n\r\n  .van-checkbox-group {\r\n    background: #fff;\r\n    padding: 15px;\r\n    margin-top: 10px;\r\n\r\n\r\n    .van-checkbox {\r\n      margin-bottom: 10px;\r\n    }\r\n  }\r\n\r\n  .bottomBox {\r\n\r\n    p {\r\n      display: flex;\r\n      align-items: center;\r\n      margin-top: 10px;\r\n      font-size: 14px;\r\n      background-color: #fff;\r\n      padding: 5px;\r\n      color: #666;\r\n      font-style: italic;\r\n\r\n      .van-switch {\r\n        margin-right: 10px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .faceCompare, .similarity {\r\n    box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.5);\r\n    background-color: #fff;\r\n    padding: 5px;\r\n    margin: 10px 0;\r\n    box-sizing: border-box;\r\n\r\n\r\n    h2 {\r\n      font-size: 16px;\r\n      margin-bottom: 5px;\r\n    }\r\n\r\n    .referenceImgs {\r\n      display: flex;\r\n      justify-content: flex-start;\r\n      text-align: center;\r\n\r\n      img {\r\n        width: 100px;\r\n        height: 140px;\r\n        margin-right: 10px;\r\n        display: block;\r\n      }\r\n      span {\r\n        font-size: 12px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .danger {\r\n    color: red;\r\n  }\r\n\r\n  .timer {\r\n    font-size: 14px;\r\n    line-height: 20px;\r\n    background-color: #fff;\r\n    padding: 5px;\r\n    margin: 10px 0;\r\n    box-sizing: border-box;\r\n  }\r\n</style>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=2949188d&lang=less&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\face\\\\face-api.js\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2949188d\"]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=0341257d\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=0341257d&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\face\\\\face-api.js\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue'\r\nimport App from './App.vue'\r\n\r\nimport Vant from 'vant';\r\nimport 'vant/lib/index.css';\r\n\r\ncreateApp(App)\r\n    .use(Vant)\r\n    .mount('#app')\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkface_api\"] = self[\"webpackChunkface_api\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(7405); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["id","_createElementBlock","_createVNode","_component_FaceRecognize","data","reactive","base64","similarity","detectList","optionList","showSimilar","trackVideoFaces","trackCameraFaces","videoStream","videoStatus","genderTranslator","male","female","expressionTranslator","neutral","happy","sad","angry","fearful","disgusted","surprised","detectTypes","faces","showConfig","columns","values","text","value","defaultIndex","selectedValue","showCameraList","cameraList","videoTrack","count","forwardTimes","time","fps","refs","canvas","img","video","pickImage","toRefs","setImage","async","files","e","target","faceapi","src","entryFaces","imgs","document","querySelectorAll","singleResult","withFaceLandmarks","withFaceDescriptor","alt","descriptor","drawLabelBox","box","options","_box","x","y","width","height","drawOptions","label","lineWidth","boxColor","drawLabelOptions","anchorPosition","backgroundColor","fontColor","fontSize","padding","drawAreaBox","draw","drawTexts","texts","pos","anchor","drawTextBox","detectFactory","input","ts","Date","now","displaySize","getFaceDetectorOptions","includes","detections","withFaceDescriptors","resizedDetections","faceMatcher","forEach","fd","detection","bestMatch","findBestMatch","_label","withFaceExpressions","resizedResults","result","expressions","maxProbability","Math","max","Object","expression","entries","find","round","bottomLeft","withAgeAndGender","age","gender","genderProbability","_score","updateTimeStats","setTimeout","window","requestAnimationFrame","compareFaces","detection1","detection2","timeInMs","concat","slice","avgTimeInMs","reduce","total","t","length","minConfidence","scoreThreshold","inputSize","handleColumnDisabled","allSelected","rowIndex","map","item","disabled","selectHandle","getMediaDevices","navigator","mediaDevices","enumerateDevices","then","devices","cameras","filter","kind","index","deviceId","Toast","message","forbidClick","mask","catch","err","console","log","getVideoStream","getUserMedia","audio","sourceId","stream","srcObject","getTracks","init","toast","duration","Promise","all","clear","onMounted","watch","newValue","stop","__exports__","name","components","FaceRecognize","render","createApp","App","use","Vant","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","keys","every","key","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","g","globalThis","this","Function","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","p","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","push","__webpack_exports__"],"sourceRoot":""}